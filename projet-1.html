<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Projet — PRINTEMPS DES MARAIS</title>

  <!-- Google Fonts : Aliens and Cows + Roboto (fallback chiffres) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Aliens+and+Cows&family=Roboto:wght@400;700&display=swap" rel="stylesheet">

  <style>
    :root{ --title-font:'Aliens and Cows','Roboto',system-ui,sans-serif; --line:rgba(255,255,255,.18); --panel:rgba(46,51,46,.75); --shadow:0 10px 30px rgba(0,0,0,.35); }

    /* Thème */
    body{ margin:0; background:#3A403A; color:#f0f0f0; font-family:system-ui,sans-serif; }
    header, footer{ background:#2e332e; border-bottom:1px solid rgba(255,255,255,.12); }
    header{ padding:1rem 1.25rem; }
    .wrap{ max-width:1100px; margin:0 auto; padding:1.5rem; }
    h1,h2{ font-family:var(--title-font); color:#fff; margin:0 0 .75rem; }
    p{ line-height:1.7; }
    .topbar{ display:flex; align-items:center; gap:.75rem; flex-wrap:wrap; margin-bottom:.75rem; }
    .back{ display:inline-block; text-decoration:none; color:#dcdcdc; font-family:var(--title-font); text-transform:uppercase; letter-spacing:1px; border:1px solid rgba(255,255,255,.25); border-radius:.5rem; padding:.35rem .65rem; }
    .back:hover{ color:#fff; background:#1f231f; }
    nav.breadcrumb{ font-size:.95rem; }
    nav.breadcrumb a{ color:#dcdcdc; text-decoration:none; }
    nav.breadcrumb a:hover{ color:#fff; text-decoration:underline; }
    nav.breadcrumb .sep{ opacity:.6; margin:0 .35rem; }
    .intro{ background:#444c44; border-radius:.6rem; padding:1rem 1.25rem; box-shadow:var(--shadow); margin-bottom:1.5rem; }

    /* Grille storyboard */
    .storyboard{ display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:1rem; }
    figure{ margin:0; background:#444c44; border-radius:.6rem; overflow:hidden; box-shadow:0 2px 6px rgba(0,0,0,.3); transition:transform .25s ease, background .25s ease; cursor:zoom-in; }
    figure:hover{ transform:translateY(-3px); background:#515951; }
    .shot{ display:block; width:100%; height:220px; object-fit:cover; object-position:center; background:#2e332e; }
    figcaption{ padding:.6rem .8rem; font-size:.95rem; color:#e7e7e7; border-top:1px solid rgba(255,255,255,.12); }
    .storyboard .wide{ grid-column:1/-1; }
    .wide .shot{ height:360px; }

    /* Lightbox */
    .lightbox{ position:fixed; inset:0; z-index:999; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.55); backdrop-filter: blur(6px) brightness(.9); }
    .lightbox.open{ display:flex; }
    .lb-inner{ position:relative; max-width:min(92vw, 1200px); max-height:88vh; display:flex; flex-direction:column; gap:.6rem; padding:0 1rem; }
    .lb-img{ display:block; max-width:100%; max-height:80vh; border-radius:.6rem; box-shadow:0 10px 30px rgba(0,0,0,.5); user-select:none; cursor:zoom-in; }
    .lb-img:focus{ outline:3px solid rgba(255,255,255,.6); outline-offset:4px; }
    .lb-caption{ text-align:center; font-size:1rem; color:#eee; text-wrap:balance; }

    /* Commandes lightbox */
    .lb-controls{
      position:absolute; inset:auto 0 -52px 0; /* sous l'image, mais dans la zone */
      display:flex; justify-content:center; gap:.5rem; pointer-events:none;
    }
    .lb-controls .ui{
      pointer-events:auto; display:inline-flex; align-items:center; gap:.5rem;
      background: var(--panel); border:1px solid var(--line); border-radius:.6rem; padding:.35rem .55rem; box-shadow:var(--shadow);
      font-family: var(--title-font); text-transform:uppercase; letter-spacing:.8px; font-size:.85rem; color:#f0f0f0;
    }
    .lb-controls button, .lb-controls select{
      appearance:none; border:1px solid var(--line); background:rgba(255,255,255,.06); color:#f0f0f0; border-radius:.45rem; padding:.3rem .55rem; font:inherit; cursor:pointer;
    }
    .lb-controls button:hover{ background:rgba(255,255,255,.1); }
    .lb-controls .state{ opacity:.8; font-size:.8rem; }

    footer{ margin-top:2rem; padding:1.25rem; text-align:center; color:#ccc; border-top:1px solid rgba(255,255,255,.2); }

    /* Responsive */
    @media (max-width:600px){
      .wrap{ padding:1rem; }
      .shot{ height:200px; }
      .wide .shot{ height:260px; }
      nav.breadcrumb{ font-size:.9rem; }
    }
    /* Petite sécurité si l'UA ne supporte pas backdrop-filter */
    @supports not ((backdrop-filter: blur(4px))){
      .lightbox{ background: rgba(0,0,0,.8); }
    }
    .sr-only{ position:absolute!important; width:1px;height:1px; padding:0;margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="topbar">
        <a class="back" href="index.html">⟵ Retour à l’accueil</a>
        <nav class="breadcrumb" aria-label="Fil d’Ariane">
          <a href="index.html">Accueil</a>
          <span class="sep">›</span>
          <span aria-current="page">Projet</span>
        </nav>
      </div>
      <h1>Projet — Storyboard</h1>
      <p>Une narration visuelle des étapes du projet (sélection d’images, de l’idéation au terrain).</p>
    </div>
  </header>

  <main class="wrap">
    <section class="intro">
      <h2>Contexte</h2>
      <p>Ce storyboard documente les étapes du projet : repérages, aménagements, installation de l’élevage patrimonial, interventions scientifiques, artistiques et pédagogiques.</p>
    </section>

    <!-- Grille d’images -->
    <section aria-label="Storyboard du projet">
      <h2>Storyboard</h2>
      <div class="storyboard" id="storyboard">
        <figure class="wide" data-src="images/storyboard/story0.jpg" data-caption="Vue générale du site — premières prises de vues et repérages.">
          <img class="shot" src="images/storyboard/story0.jpg" alt="Vue générale du site — Estuaire / zone humide" loading="lazy">
          <figcaption>Vue générale du site — premières prises de vues et repérages.</figcaption>
        </figure>

        <figure data-src="images/storyboard/story1.jpg" data-caption="Repérage des zones d’intérêt écologique."><img class="shot" src="images/storyboard/story1.jpg" alt="Repérage des zones d’intérêt écologique" loading="lazy"><figcaption>Repérage des zones d’intérêt écologique.</figcaption></figure>
        <figure data-src="images/storyboard/story2.jpg" data-caption="Cartographie et plan de gestion initial."><img class="shot" src="images/storyboard/story2.jpg" alt="Cartographie et plan de gestion initial" loading="lazy"><figcaption>Cartographie et plan de gestion initial.</figcaption></figure>
        <figure data-src="images/storyboard/story3.jpg" data-caption="Aménagements légers et balisage du site."><img class="shot" src="images/storyboard/story3.jpg" alt="Aménagements légers et balisage du site" loading="lazy"><figcaption>Aménagements légers et balisage du site.</figcaption></figure>
        <figure data-src="images/storyboard/story4.jpg" data-caption="Installation de l’élevage (race patrimoniale, menacée et endémique)."><img class="shot" src="images/storyboard/story4.jpg" alt="Installation de l’élevage — race patrimoniale" loading="lazy"><figcaption>Installation de l’élevage (race patrimoniale, menacée et endémique).</figcaption></figure>
        <figure data-src="images/storyboard/story5.jpg" data-caption="Interventions scientifiques et pédagogiques avec le public."><img class="shot" src="images/storyboard/story5.jpg" alt="Interventions scientifiques et pédagogiques" loading="lazy"><figcaption>Interventions scientifiques et pédagogiques avec le public.</figcaption></figure>
        <figure data-src="images/storyboard/story6.jpg" data-caption="Résultats préliminaires : biodiversité observée."><img class="shot" src="images/storyboard/story6.jpg" alt="Résultats préliminaires — biodiversité observée" loading="lazy"><figcaption>Résultats préliminaires : biodiversité observée.</figcaption></figure>

        <!-- story7 → story34 -->
        <figure data-src="images/storyboard/story7.jpg" data-caption="Étape 7 — Poursuite des observations de terrain."><img class="shot" src="images/storyboard/story7.jpg" alt="Storyboard 7" loading="lazy"><figcaption>Étape 7 — Poursuite des observations de terrain.</figcaption></figure>
        <figure data-src="images/storyboard/story8.jpg" data-caption="Étape 8 — Rencontre avec les partenaires locaux."><img class="shot" src="images/storyboard/story8.jpg" alt="Storyboard 8" loading="lazy"><figcaption>Étape 8 — Rencontre avec les partenaires locaux.</figcaption></figure>
        <figure data-src="images/storyboard/story9.jpg" data-caption="Étape 9 — Relevés cartographiques complémentaires."><img class="shot" src="images/storyboard/story9.jpg" alt="Storyboard 9" loading="lazy"><figcaption>Étape 9 — Relevés cartographiques complémentaires.</figcaption></figure>
        <figure data-src="images/storyboard/story10.jpg" data-caption="Étape 10 — Atelier participatif avec habitants."><img class="shot" src="images/storyboard/story10.jpg" alt="Storyboard 10" loading="lazy"><figcaption>Étape 10 — Atelier participatif avec habitants.</figcaption></figure>
        <figure data-src="images/storyboard/story11.jpg" data-caption="Étape 11 — Suivi faune/flore : premières tendances."><img class="shot" src="images/storyboard/story11.jpg" alt="Storyboard 11" loading="lazy"><figcaption>Étape 11 — Suivi faune/flore : premières tendances.</figcaption></figure>
        <figure data-src="images/storyboard/story12.jpg" data-caption="Étape 12 — Mise en place de balises pédagogiques."><img class="shot" src="images/storyboard/story12.jpg" alt="Storyboard 12" loading="lazy"><figcaption>Étape 12 — Mise en place de balises pédagogiques.</figcaption></figure>
        <figure data-src="images/storyboard/story13.jpg" data-caption="Étape 13 — Travaux légers d’aménagement écologique."><img class="shot" src="images/storyboard/story13.jpg" alt="Storyboard 13" loading="lazy"><figcaption>Étape 13 — Travaux légers d’aménagement écologique.</figcaption></figure>
        <figure data-src="images/storyboard/story14.jpg" data-caption="Étape 14 — Coordination scientifique interdisciplinaire."><img class="shot" src="images/storyboard/story14.jpg" alt="Storyboard 14" loading="lazy"><figcaption>Étape 14 — Coordination scientifique interdisciplinaire.</figcaption></figure>
        <figure data-src="images/storyboard/story15.jpg" data-caption="Étape 15 — Documentation photographique et vidéo."><img class="shot" src="images/storyboard/story15.jpg" alt="Storyboard 15" loading="lazy"><figcaption>Étape 15 — Documentation photographique et vidéo.</figcaption></figure>
        <figure data-src="images/storyboard/story16.jpg" data-caption="Étape 16 — Valorisation patrimoniale : archives et récits."><img class="shot" src="images/storyboard/story16.jpg" alt="Storyboard 16" loading="lazy"><figcaption>Étape 16 — Valorisation patrimoniale : archives et récits.</figcaption></figure>
        <figure data-src="images/storyboard/story17.jpg" data-caption="Étape 17 — Mise en place de panneaux d’information."><img class="shot" src="images/storyboard/story17.jpg" alt="Storyboard 17" loading="lazy"><figcaption>Étape 17 — Mise en place de panneaux d’information.</figcaption></figure>
        <figure data-src="images/storyboard/story18.jpg" data-caption="Étape 18 — Relevés saisonniers : suivi des variations."><img class="shot" src="images/storyboard/story18.jpg" alt="Storyboard 18" loading="lazy"><figcaption>Étape 18 — Relevés saisonniers : suivi des variations.</figcaption></figure>
        <figure data-src="images/storyboard/story19.jpg" data-caption="Étape 19 — Synthèse d’étape et ajustements du plan."><img class="shot" src="images/storyboard/story19.jpg" alt="Storyboard 19" loading="lazy"><figcaption>Étape 19 — Synthèse d’étape et ajustements du plan.</figcaption></figure>
        <figure data-src="images/storyboard/story20.jpg" data-caption="Étape 20 — Échanges avec les acteurs culturels."><img class="shot" src="images/storyboard/story20.jpg" alt="Storyboard 20" loading="lazy"><figcaption>Étape 20 — Échanges avec les acteurs culturels.</figcaption></figure>
        <figure data-src="images/storyboard/story21.jpg" data-caption="Étape 21 — Déploiement d’actions pédagogiques ciblées."><img class="shot" src="images/storyboard/story21.jpg" alt="Storyboard 21" loading="lazy"><figcaption>Étape 21 — Déploiement d’actions pédagogiques ciblées.</figcaption></figure>
        <figure data-src="images/storyboard/story22.jpg" data-caption="Étape 22 — Suivi des zones humides sensibles."><img class="shot" src="images/storyboard/story22.jpg" alt="Storyboard 22" loading="lazy"><figcaption>Étape 22 — Suivi des zones humides sensibles.</figcaption></figure>
        <figure data-src="images/storyboard/story23.jpg" data-caption="Étape 23 — Restitution intermédiaire au public."><img class="shot" src="images/storyboard/story23.jpg" alt="Storyboard 23" loading="lazy"><figcaption>Étape 23 — Restitution intermédiaire au public.</figcaption></figure>
        <figure data-src="images/storyboard/story24.jpg" data-caption="Étape 24 — Ajustements méthodologiques (retours terrain)."><img class="shot" src="images/storyboard/story24.jpg" alt="Storyboard 24" loading="lazy"><figcaption>Étape 24 — Ajustements méthodologiques (retours terrain).</figcaption></figure>
        <figure data-src="images/storyboard/story25.jpg" data-caption="Étape 25 — Installation d’équipements complémentaires."><img class="shot" src="images/storyboard/story25.jpg" alt="Storyboard 25" loading="lazy"><figcaption>Étape 25 — Installation d’équipements complémentaires.</figcaption></figure>
        <figure data-src="images/storyboard/story26.jpg" data-caption="Étape 26 — Mise en réseau avec structures régionales."><img class="shot" src="images/storyboard/story26.jpg" alt="Storyboard 26" loading="lazy"><figcaption>Étape 26 — Mise en réseau avec structures régionales.</figcaption></figure>
        <figure data-src="images/storyboard/story27.jpg" data-caption="Étape 27 — Focus biodiversité : inventaires thématiques."><img class="shot" src="images/storyboard/story27.jpg" alt="Storyboard 27" loading="lazy"><figcaption>Étape 27 — Focus biodiversité : inventaires thématiques.</figcaption></figure>
        <figure data-src="images/storyboard/story28.jpg" data-caption="Étape 28 — Médiation culturelle en milieu naturel."><img class="shot" src="images/storyboard/story28.jpg" alt="Storyboard 28" loading="lazy"><figcaption>Étape 28 — Médiation culturelle en milieu naturel.</figcaption></figure>
        <figure data-src="images/storyboard/story29.jpg" data-caption="Étape 29 — Préparation d’une exposition/rencontre."><img class="shot" src="images/storyboard/story29.jpg" alt="Storyboard 29" loading="lazy"><figcaption>Étape 29 — Préparation d’une exposition/rencontre.</figcaption></figure>
        <figure data-src="images/storyboard/story30.jpg" data-caption="Étape 30 — Accueil de publics et visites guidées."><img class="shot" src="images/storyboard/story30.jpg" alt="Storyboard 30" loading="lazy"><figcaption>Étape 30 — Accueil de publics et visites guidées.</figcaption></figure>
        <figure data-src="images/storyboard/story31.jpg" data-caption="Étape 31 — Évaluation d’impact (préliminaire)."><img class="shot" src="images/storyboard/story31.jpg" alt="Storyboard 31" loading="lazy"><figcaption>Étape 31 — Évaluation d’impact (préliminaire).</figcaption></figure>
        <figure data-src="images/storyboard/story32.jpg" data-caption="Étape 32 — Consolidation des partenariats."><img class="shot" src="images/storyboard/story32.jpg" alt="Storyboard 32" loading="lazy"><figcaption>Étape 32 — Consolidation des partenariats.</figcaption></figure>
        <figure data-src="images/storyboard/story33.jpg" data-caption="Étape 33 — Finalisation du plan pluriannuel."><img class="shot" src="images/storyboard/story33.jpg" alt="Storyboard 33" loading="lazy"><figcaption>Étape 33 — Finalisation du plan pluriannuel.</figcaption></figure>
        <figure data-src="images/storyboard/story34.jpg" data-caption="Étape 34 — Restitution finale et perspectives."><img class="shot" src="images/storyboard/story34.jpg" alt="Storyboard 34" loading="lazy"><figcaption>Étape 34 — Restitution finale et perspectives.</figcaption></figure>
      </div>
    </section>
  </main>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox" aria-hidden="true">
    <div class="lb-inner" role="dialog" aria-label="Image du storyboard (clic pour image suivante)">
      <img class="lb-img" id="lb-img" src="" alt="">
      <div class="lb-caption" id="lb-caption"></div>

      <!-- Commandes : Play/Pause + vitesse -->
      <div class="lb-controls">
        <div class="ui" role="group" aria-label="Contrôles de lecture">
          <button id="lb-toggle">▶︎ Play</button>
          <label for="lb-speed" class="sr-only">Vitesse</label>
          <select id="lb-speed" title="Vitesse (secondes)">
            <option value="2000">2s</option>
            <option value="3000" selected>3s</option>
            <option value="5000">5s</option>
            <option value="8000">8s</option>
          </select>
          <span class="state" id="lb-state">Pause</span>
        </div>
      </div>

      <span class="sr-only" id="lb-instructions">Clic dans l’image = suivante. Clic en dehors = fermer. Échap = fermer. Flèches ←/→ pour naviguer.</span>
    </div>
  </div>

  <footer>
    © 2025 Printemps des Marais — Projet
  </footer>

  <script>
  (function(){
    const grid = document.getElementById('storyboard');
    const items = Array.from(grid.querySelectorAll('figure'));
    const lb = document.getElementById('lightbox');
    const lbImg = document.getElementById('lb-img');
    const lbCaption = document.getElementById('lb-caption');

    // Contrôles
    const toggleBtn = document.getElementById('lb-toggle');
    const speedSel  = document.getElementById('lb-speed');
    const stateEl   = document.getElementById('lb-state');

    let index = 0;
    let timer = null;
    let interval = parseInt(speedSel.value, 10);

    function openAt(i){
      index = ((i % items.length) + items.length) % items.length;
      const f = items[index];
      const src = f.dataset.src || f.querySelector('img').src;
      const cap = f.dataset.caption || (f.querySelector('figcaption')?.textContent || '');
      lbImg.src = src;
      lbImg.alt = f.querySelector('img')?.alt || 'Image du storyboard';
      lbCaption.textContent = cap;
      lb.classList.add('open');
      lb.setAttribute('aria-hidden','false');
      document.body.style.overflow = 'hidden';
      lbImg.setAttribute('tabindex','0');
      lbImg.focus({preventScroll:true});
    }

    function closeLB(){
      pause(); // stop auto
      lb.classList.remove('open');
      lb.setAttribute('aria-hidden','true');
      document.body.style.overflow = '';
      lbImg.removeAttribute('tabindex');
      // lbImg.src = ''; // option : libère mémoire sur mobile
    }

    function next(){ openAt(index + 1); }
    function prev(){ openAt(index - 1); }

    // Auto-play
    function play(){
      if(timer) return;
      timer = setInterval(next, interval);
      toggleBtn.textContent = '⏸︎ Pause';
      stateEl.textContent = 'Lecture';
    }
    function pause(){
      if(timer){ clearInterval(timer); timer = null; }
      toggleBtn.textContent = '▶︎ Play';
      stateEl.textContent = 'Pause';
    }
    toggleBtn.addEventListener('click', ()=> timer ? pause() : play());
    speedSel.addEventListener('change', ()=>{
      interval = parseInt(speedSel.value, 10);
      if(timer){ pause(); play(); } // redémarre avec la nouvelle vitesse
    });

    // Ouverture depuis les vignettes
    items.forEach((fig, i)=> fig.addEventListener('click', ()=> openAt(i)));

    // Fermer en cliquant l’overlay
    lb.addEventListener('click', (e)=>{ if(e.target === lb) closeLB(); });

    // Clic sur l'image -> suivante (et garde l'auto-play si actif)
    lbImg.addEventListener('click', (e)=>{ e.stopPropagation(); next(); });

    // Clavier
    document.addEventListener('keydown', (e)=>{
      if(!lb.classList.contains('open')) return;
      if(e.key === 'Escape'){ closeLB(); }
      else if(e.key === 'ArrowRight'){ next(); }
      else if(e.key === 'ArrowLeft'){ prev(); }
    });

    // Préchargement léger de l’image suivante
    lbImg.addEventListener('load', ()=>{
      const nextIndex = (index + 1) % items.length;
      const f = items[nextIndex];
      const src = f.dataset.src || f.querySelector('img').src;
      new Image().src = src;
    });

    // Ouvrir sur une image précise via #index (ex: #12)
    function syncFromHash(){
      const n = parseInt(location.hash.replace('#',''), 10);
      if(!isNaN(n) && n >= 0 && n < items.length){ openAt(n); }
    }
    window.addEventListener('hashchange', syncFromHash);
    syncFromHash();

  })();
  </script>
</body>
</html>
